108-2 大數據分析方法 作業一
================
林弘啓

搞不清楚各行各業的薪資差異嗎? 念研究所到底對第一份工作的薪資影響有多大? CP值高嗎? 透過分析**初任人員平均經常性薪資**-
（107年）<https://data.gov.tw/dataset/6647>
（104-105年）<http://ipgod.nchc.org.tw/dataset/a17000000j-020066>
，可初步了解台灣近幾年各行各業、各學歷的起薪。

## 比較104年度和107年度大學畢業者的薪資資料

### 資料匯入與處理

``` r
library(dplyr)
```

    ## 
    ## Attaching package: 'dplyr'

    ## The following objects are masked from 'package:stats':
    ## 
    ##     filter, lag

    ## The following objects are masked from 'package:base':
    ## 
    ##     intersect, setdiff, setequal, union

``` r
library(readr)
data104 <- read_csv("C:/Users/Gabriel/Desktop/104.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   年度 = col_double(),
    ##   大職業別 = col_character(),
    ##   經常性薪資薪資 = col_double(),
    ##   `經常性薪資女/男` = col_character(),
    ##   國中及以下薪資 = col_character(),
    ##   `國中及以下女/男` = col_character(),
    ##   高中或高職薪資 = col_character(),
    ##   `高中或高職女/男` = col_character(),
    ##   專科薪資 = col_character(),
    ##   `專科女/男` = col_character(),
    ##   大學薪資 = col_character(),
    ##   `大學女/男` = col_character(),
    ##   研究所薪資 = col_character(),
    ##   `研究所女/男` = col_character()
    ## )

``` r
data107 <- read_csv("C:/Users/Gabriel/Desktop/107.csv")
```

    ## Parsed with column specification:
    ## cols(
    ##   年度 = col_double(),
    ##   大職業別 = col_character(),
    ##   經常性薪資薪資 = col_character(),
    ##   `經常性薪資女/男` = col_character(),
    ##   國中及以下薪資 = col_character(),
    ##   `國中及以下女/男` = col_character(),
    ##   高中或高職薪資 = col_character(),
    ##   `高中或高職女/男` = col_character(),
    ##   專科薪資 = col_character(),
    ##   `專科女/男` = col_character(),
    ##   大學薪資 = col_character(),
    ##   `大學女/男` = col_character(),
    ##   研究所薪資 = col_character(),
    ##   `研究所女/男` = col_character()
    ## )

``` r
data104$`大學薪資`<-as.numeric(gsub("—|…",NA,data104$`大學薪資`))
data107$`大學薪資`<-as.numeric(gsub("—|…",NA,data107$`大學薪資`))
datacompare<-inner_join(data104,data107,"大職業別")
```

把107跟104的薪資資料匯入進去，選取大學薪資，因為大學薪資是字串，所以用as.numeric來轉成數字來做計算，並且把-改成NA。

### 107年度薪資較104年度薪資高的職業有哪些?

``` r
#這是R Code Chunk

salary<-select(datacompare,大職業別,大學薪資.x,大學薪資.y)
salary$rate<-salary$大學薪資.y/salary$大學薪資.x
raise<-filter(salary,rate>1)
salaryrank<-arrange(salary,desc(rate))
head(salaryrank,10)
```

    ## # A tibble: 10 x 4
    ##    大職業別                                 大學薪資.x 大學薪資.y  rate
    ##    <chr>                                         <dbl>      <dbl> <dbl>
    ##  1 專業_科學及技術服務業-服務及銷售工作人員      24423      28304  1.16
    ##  2 教育業-服務及銷售工作人員                     24324      27543  1.13
    ##  3 不動產業-技術員及助理專業人員                 27338      30914  1.13
    ##  4 住宿及餐飲業-服務及銷售工作人員               23548      26111  1.11
    ##  5 藝術_娛樂及休閒服務業-事務支援人員            24244      26611  1.10
    ##  6 金融及保險業-技藝_機械設備操作及組裝人員      30074      32997  1.10
    ##  7 教育業                                        25162      27582  1.10
    ##  8 教育業-事務支援人員                           23643      25908  1.10
    ##  9 用水供應及污染整治業-專業人員                 32179      34957  1.09
    ## 10 教育業-專業人員                               26615      28911  1.09

先把有關大學薪資資料選出來，然後ˋ把107年的薪資除以104年的薪資來算比率，挑出比率大於1的職業然後作排序，然後我們可以看到前十名的職業大多是教育類，裡面有4個有關教育類別，還有大多有關銷售的人員跟專業人員。

### 提高超過5%的的職業有哪些?

``` r
#這是R Code Chunk
highsalary<-filter(salary,rate>1.05)
highsalaryrank<-arrange(highsalary,desc(rate))  
highsalaryrank
```

    ## # A tibble: 53 x 4
    ##    大職業別                                 大學薪資.x 大學薪資.y  rate
    ##    <chr>                                         <dbl>      <dbl> <dbl>
    ##  1 專業_科學及技術服務業-服務及銷售工作人員      24423      28304  1.16
    ##  2 教育業-服務及銷售工作人員                     24324      27543  1.13
    ##  3 不動產業-技術員及助理專業人員                 27338      30914  1.13
    ##  4 住宿及餐飲業-服務及銷售工作人員               23548      26111  1.11
    ##  5 藝術_娛樂及休閒服務業-事務支援人員            24244      26611  1.10
    ##  6 金融及保險業-技藝_機械設備操作及組裝人員      30074      32997  1.10
    ##  7 教育業                                        25162      27582  1.10
    ##  8 教育業-事務支援人員                           23643      25908  1.10
    ##  9 用水供應及污染整治業-專業人員                 32179      34957  1.09
    ## 10 教育業-專業人員                               26615      28911  1.09
    ## # ... with 43 more rows

這裡只要把比率超過1.05的職業挑選出來，接著做排序，這樣就可以得到超過5%的職業有53個職業。

### 主要的職業種別是哪些種類呢?

``` r
#這是R Code Chunk
frequency<-table(sapply (strsplit (highsalary$大職業別,"-") , "[" ,  1)) 
  View(frequency)
```

## 男女同工不同酬現況分析

男女同工不同酬一直是性別平等中很重要的問題，分析資料來源為104到107年度的大學畢業薪資。

### 104和107年度的大學畢業薪資資料，哪些行業男生薪資比女生薪資多?

``` r
#這是R Code Chunk
data104$`大學女/男`<-as.numeric(gsub("—|…",NA,data104$`大學女/男`))
boy_girl_104<-select(data104,大職業別,`大學女/男`)
boy_104dif<-filter(boy_girl_104,`大學女/男`<100)
boy_104rank<-arrange(boy_104dif,`大學女/男`)
head(boy_104rank,10)
```

    ## # A tibble: 10 x 2
    ##    大職業別                                         `大學女/男`
    ##    <chr>                                                  <dbl>
    ##  1 電力及燃氣供應業-技藝_機械設備操作及組裝人員            91.7
    ##  2 教育業-服務及銷售工作人員                               91.9
    ##  3 礦業及土石採取業-技術員及助理專業人員                   92.4
    ##  4 礦業及土石採取業-技藝_機械設備操作及組裝人員            93.1
    ##  5 礦業及土石採取業                                        95.3
    ##  6 其他服務業-事務支援人員                                 95.5
    ##  7 營建工程-技藝_機械設備操作及組裝人員                    95.6
    ##  8 用水供應及污染整治業-技藝_機械設備操作及組裝人員        95.9
    ##  9 營建工程                                                96.4
    ## 10 教育業                                                  96.4

``` r
#107年
data107$`大學女/男`<-as.numeric(gsub("—|…",NA,data107$`大學女/男`))
boy_girl_107<-select(data107,大職業別,`大學女/男`)
boy_107dif<-filter(boy_girl_107,`大學女/男`<100)
boy_107rank<-arrange(boy_107dif,`大學女/男`)
head(boy_107rank,10)
```

    ## # A tibble: 10 x 2
    ##    大職業別                                `大學女/男`
    ##    <chr>                                         <dbl>
    ##  1 礦業及土石採取業-專業人員                      96.0
    ##  2 電力及燃氣供應業-事務支援人員                  97.0
    ##  3 礦業及土石採取業                               97.1
    ##  4 營建工程                                       97.5
    ##  5 教育業-事務支援人員                            97.6
    ##  6 電力及燃氣供應業-服務及銷售工作人員            97.7
    ##  7 營建工程-技術員及助理專業人員                  97.8
    ##  8 用水供應及污染整治業-專業人員                  97.8
    ##  9 用水供應及污染整治業-服務及銷售工作人員        97.9
    ## 10 電力及燃氣供應業-專業人員                      98.2

把104年跟107年的大學女/男(要先轉成數字，不然無法計算)跟職業給選出來，然後各自挑出小於100的值，接著做有遞增排序，就可以看到在男生薪資大於女生薪資的行業裡，大多是有關礦業、營建工程、汙染整治，以及教育業，還有電力，做苦功居多。

### 哪些行業女生薪資比男生薪資多?

``` r
#這是R Code Chunk
girl_104dif<-filter(boy_girl_104,`大學女/男`>100)
girl_104rank<-arrange(girl_104dif,`大學女/男`)
head(girl_104rank,10)
```

    ## # A tibble: 1 x 2
    ##   大職業別                                          `大學女/男`
    ##   <chr>                                                   <dbl>
    ## 1 專業_科學及技術服務業-技藝_機械設備操作及組裝人員        100.

``` r
#107年
girl_107dif<-filter(boy_girl_107,`大學女/男`>100)
girl_107rank<-arrange(girl_107dif,`大學女/男`)
head(girl_107rank,10)
```

    ## # A tibble: 0 x 2
    ## # ... with 2 variables: 大職業別 <chr>, `大學女/男` <dbl>

跟上面的做法一樣，只是要把小於100改成大於100，我們可以看到在104年只有一項，這一項是專業\_科學及技術服務業-技藝\_機械設備操作及組裝，看來男女工資的差異比還挺大的，男薪資大於女的還算蠻多的，但女大於男只有一項。

## 研究所薪資差異

以107年度的資料來看，哪個職業別念研究所最划算呢 (研究所學歷薪資與大學學歷薪資增加比例最多)?

``` r
#這是R Code Chunk
data107$研究所薪資<-as.numeric(gsub("—|…",NA,data107$研究所薪資))
studio107<-select(data107,"大職業別","研究所薪資","大學薪資")
studio107<-studio107[complete.cases(studio107),]
studio107$rate<-studio107$研究所薪資/studio107$大學薪資
studio107rank<-arrange(studio107,desc(rate))
studio107rank
```

    ## # A tibble: 79 x 4
    ##    大職業別                                    研究所薪資 大學薪資  rate
    ##    <chr>                                            <dbl>    <dbl> <dbl>
    ##  1 其他服務業                                       31909    25781  1.24
    ##  2 專業_科學及技術服務業                            35381    29353  1.21
    ##  3 專業_科學及技術服務業-專業人員                   39103    32460  1.20
    ##  4 教育業-事務支援人員                              30827    25908  1.19
    ##  5 出版、影音製作、傳播及資通訊服務業               34503    29143  1.18
    ##  6 其他服務業-事務支援人員                          30830    26115  1.18
    ##  7 出版、影音製作、傳播及資通訊服務業-專業人員      37479    31763  1.18
    ##  8 製造業                                           33916    28777  1.18
    ##  9 工業                                             33893    28850  1.17
    ## 10 工業及服務業                                     33880    28849  1.17
    ## # ... with 69 more rows

選出大學薪資跟研究所的薪資(要轉換成數字)，然後新增rate的欄位來存放研究所的薪資除以大學薪資，然後遞減排序，上面看起來讀研究所起薪最多加六千多，讀科學及技術類的科系，像是資工系或化工系，讀研究所就蠻值得的。前十名大多是知識領域的行業居多，以勞力為主的比利偏少。

## 我有興趣的職業別薪資狀況分析

### 有興趣的職業別篩選，呈現薪資

``` r
#這是R Code Chunk

my_favorite<-data.frame(職業=studio107rank$大職業別,
                        大學薪資=studio107rank$大學薪資,
                        研究所薪資=studio107rank$研究所薪資)
my_favorite<-my_favorite[grep('金融',my_favorite$職業),]
my_favorite
```

    ##                                 職業 大學薪資 研究所薪資
    ## 21         金融及保險業-事務支援人員    30515      35274
    ## 25                      金融及保險業    32448      37228
    ## 46             金融及保險業-專業人員    35490      39868
    ## 52 金融及保險業-技術員及助理專業人員    32602      36312

我的興趣是跟金融領域的相關行業是有興趣的，所以我想要看金融行業的大學跟研究所的薪資大約是多少，所以我用一個data
frame來存放職業、大學薪資、跟研究所薪資，然後用grep函式來選出職業裡有金融的字的行業。

### 這些職業別研究所薪資與大學薪資差多少呢？

``` r
#這是R Code Chunk
my_favorite$差異<-my_favorite$研究所薪資-my_favorite$大學薪資
my_favorite
```

    ##                                 職業 大學薪資 研究所薪資 差異
    ## 21         金融及保險業-事務支援人員    30515      35274 4759
    ## 25                      金融及保險業    32448      37228 4780
    ## 46             金融及保險業-專業人員    35490      39868 4378
    ## 52 金融及保險業-技術員及助理專業人員    32602      36312 3710

看過金融行業的大學的研究所的薪資差異後，我應該會選擇去讀研究所，畢竟起薪起碼差了快4000元，但我想邊上班邊讀研究所，畢竟研究所的花費還是有點多。
